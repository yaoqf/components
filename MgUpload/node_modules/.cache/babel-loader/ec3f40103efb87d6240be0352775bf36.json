{"ast":null,"code":"import _slicedToArray from \"/Users/yaoqingfeng/Downloads/work/\\u901A\\u7528\\u7EC4\\u4EF6/MgUpload/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/yaoqingfeng/Downloads/work/\\u901A\\u7528\\u7EC4\\u4EF6/MgUpload/src/MgUpload.js\";\nimport React, { useState, forwardRef, useRef } from \"react\";\nimport \"./styles.css\"; // import { Upload, Button } from \"antd\";\n// import { UploadOutlined } from \"@ant-design/icons\";\n\nimport { uuids } from './utils/utils';\n\nfunction MgUpload(props, ref) {\n  var _this = this;\n\n  var _props$fileList = props.fileList,\n      fileList = _props$fileList === void 0 ? [] : _props$fileList,\n      _props$handleChange = props.handleChange,\n      handleChange = _props$handleChange === void 0 ? function () {} : _props$handleChange;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      files = _useState2[0],\n      setFiles = _useState2[1]; // const [jsFileList, setJsFileList] = useState([]);\n\n\n  var inputRef = useRef(); // const uploadProps = {\n  //   onChange: (info) => {\n  //     console.log(info.file);\n  //     console.log(info.fileList);\n  //     setFileList(info.fileList);\n  //   },\n  //   beforeUpload: () => false,\n  //   multiple: true,\n  //   fileList: fileList\n  // };\n\n  var onChange = function onChange(info) {\n    // console.log(info.currentTarget.files);\n    var fileList = [];\n    Object.entries(info.currentTarget.files).forEach(function (item) {\n      var _item = _slicedToArray(item, 2),\n          key = _item[0],\n          value = _item[1];\n\n      console.log(value);\n      var file = {\n        uid: uuids(),\n        name: value.name,\n        size: value.size,\n        type: value.type,\n        lastModified: value.lastModified,\n        lastModifiedDate: value.lastModifiedDate,\n        originFileObj: item[1]\n      };\n      fileList.push(file);\n    });\n    setFiles(fileList);\n    handleChange({\n      fileList\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputRef,\n    style: {\n      display: \"none\"\n    },\n    type: \"file\",\n    files: fileList,\n    onChange: onChange,\n    multiple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      inputRef.current.click();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, \"\\u4E0A\\u4F20\"), fileList.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: item.uid,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 31\n      }\n    }, item.name);\n  }), fileList.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      src: item.url || window.URL.createObjectURL(item.originFileObj),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 32\n      }\n    });\n  })));\n}\n\nexport default forwardRef(MgUpload);","map":{"version":3,"sources":["/Users/yaoqingfeng/Downloads/work/通用组件/MgUpload/src/MgUpload.js"],"names":["React","useState","forwardRef","useRef","uuids","MgUpload","props","ref","fileList","handleChange","files","setFiles","inputRef","onChange","info","Object","entries","currentTarget","forEach","item","key","value","console","log","file","uid","name","size","type","lastModified","lastModifiedDate","originFileObj","push","display","current","click","map","url","window","URL","createObjectURL"],"mappings":"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","sourcesContent":["import React, { useState, forwardRef, useRef } from \"react\";\nimport \"./styles.css\";\n// import { Upload, Button } from \"antd\";\n// import { UploadOutlined } from \"@ant-design/icons\";\nimport { uuids } from './utils/utils'\n\n\nfunction MgUpload(props, ref) {\n  const {\n    fileList = [],\n    handleChange = () => { }\n  } = props\n  const [files, setFiles] = useState([]);\n  // const [jsFileList, setJsFileList] = useState([]);\n  const inputRef = useRef();\n  // const uploadProps = {\n  //   onChange: (info) => {\n  //     console.log(info.file);\n  //     console.log(info.fileList);\n  //     setFileList(info.fileList);\n  //   },\n  //   beforeUpload: () => false,\n  //   multiple: true,\n  //   fileList: fileList\n  // };\n\n  const onChange = (info) => {\n    // console.log(info.currentTarget.files);\n    const fileList = [];\n    Object.entries(info.currentTarget.files).forEach(item => {\n      const [key, value] = item;\n      console.log(value)\n      const file = {\n        uid: uuids(),\n        name: value.name,\n        size: value.size,\n        type: value.type,\n        lastModified: value.lastModified,\n        lastModifiedDate: value.lastModifiedDate,\n        originFileObj: item[1]\n      };\n      fileList.push(file);\n    });\n    setFiles(fileList)\n    handleChange({ fileList });\n  };\n  return (\n    <div className=\"App\">\n      {/* <Upload {...uploadProps}>\n        <Button>\n          <UploadOutlined /> Click to Upload\n        </Button>\n      </Upload> */}\n      <div>\n        <input\n          ref={inputRef}\n          style={{ display: \"none\" }}\n          type=\"file\"\n          files={fileList}\n          onChange={onChange}\n          multiple={true}\n        />\n        <button onClick={() => { inputRef.current.click() }}\n        >\n          上传\n        </button>\n        {fileList.map(item => <div key={item.uid}>\n          {item.name}\n        </div>)}\n        {\n          fileList.map(item => <img src={item.url || window.URL.createObjectURL(item.originFileObj)}></img>)\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default forwardRef(MgUpload);\n"]},"metadata":{},"sourceType":"module"}