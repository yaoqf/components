{"ast":null,"code":"import _toConsumableArray from \"/Users/yaoqingfeng/Downloads/work/\\u901A\\u7528\\u7EC4\\u4EF6/MgUpload/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/yaoqingfeng/Downloads/work/\\u901A\\u7528\\u7EC4\\u4EF6/MgUpload/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/yaoqingfeng/Downloads/work/\\u901A\\u7528\\u7EC4\\u4EF6/MgUpload/src/MgUpload.js\";\nimport React, { useState, forwardRef, useRef } from \"react\";\nimport \"./mgupload.css\";\nimport { uuids } from './utils/utils';\nimport upload from \"./public/svg/upload.svg\";\n\nfunction MgUpload(props, ref) {\n  var _this = this;\n\n  var fileList = props.fileList,\n      _props$handleChange = props.handleChange,\n      handleChange = _props$handleChange === void 0 ? function () {} : _props$handleChange,\n      children = props.children;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      files = _useState2[0],\n      setFiles = _useState2[1];\n\n  var inputRef = useRef();\n\n  var onChange = function onChange(info) {\n    var fileLists = [];\n    Object.entries(info.currentTarget.files).forEach(function (item) {\n      var _item = _slicedToArray(item, 2),\n          key = _item[0],\n          value = _item[1];\n\n      var file = {\n        uid: uuids(),\n        name: value.name,\n        size: value.size,\n        type: value.type,\n        lastModified: value.lastModified,\n        lastModifiedDate: value.lastModifiedDate,\n        originFileObj: item[1]\n      };\n      fileLists.push(file);\n    });\n    setFiles([].concat(_toConsumableArray(files), fileLists));\n    handleChange({\n      fileList: fileLists\n    });\n  };\n\n  var newFileList = fileList || files;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mg-upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputRef,\n    style: {\n      display: \"none\"\n    },\n    type: \"file\",\n    files: newFileList,\n    onChange: onChange,\n    multiple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"mg-upload-button\",\n    onClick: function onClick() {\n      inputRef.current.click();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, children || /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mg-upload-button-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"mg-upload-button-content-icon\",\n    style: {\n      background: \"url(\".concat(upload, \")\"),\n      width: 14,\n      height: 14,\n      display: 'inline-block'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }), \"\\u9009\\u62E9\\u6587\\u4EF6\")), newFileList.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mg-upload-accessory-item\",\n      key: item.uid,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 34\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"mg-upload-accessory-item-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }), item.name);\n  })));\n}\n\nexport default forwardRef(MgUpload);","map":{"version":3,"sources":["/Users/yaoqingfeng/Downloads/work/通用组件/MgUpload/src/MgUpload.js"],"names":["React","useState","forwardRef","useRef","uuids","MgUpload","props","ref","fileList","handleChange","children","files","setFiles","inputRef","onChange","info","fileLists","Object","entries","currentTarget","forEach","item","key","value","file","uid","name","size","type","lastModified","lastModifiedDate","originFileObj","push","newFileList","display","current","click","background","upload","width","height","map"],"mappings":"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","sourcesContent":["import React, { useState, forwardRef, useRef } from \"react\";\nimport \"./mgupload.css\";\nimport { uuids } from './utils/utils'\nimport upload from './public/svg/upload.svg';\n\n\nfunction MgUpload(props, ref) {\n  const {\n    fileList,\n    handleChange = () => { },\n    children\n  } = props\n  const [files, setFiles] = useState([]);\n  const inputRef = useRef();\n\n  const onChange = (info) => {\n    const fileLists = [];\n    Object.entries(info.currentTarget.files).forEach(item => {\n      const [key, value] = item;\n      const file = {\n        uid: uuids(),\n        name: value.name,\n        size: value.size,\n        type: value.type,\n        lastModified: value.lastModified,\n        lastModifiedDate: value.lastModifiedDate,\n        originFileObj: item[1]\n      };\n      fileLists.push(file);\n    });\n    setFiles([...files, ...fileLists])\n    handleChange({ fileList: fileLists });\n  };\n\n  const newFileList = fileList || files;\n  return (\n    <div className='mg-upload'>\n      <input\n        ref={inputRef}\n        style={{ display: \"none\" }}\n        type=\"file\"\n        files={newFileList}\n        onChange={onChange}\n        multiple={true}\n      />\n      <div>\n        <button className='mg-upload-button' onClick={() => { inputRef.current.click() }}\n        >\n          {children || <div className='mg-upload-button-content'>\n            <span className='mg-upload-button-content-icon' style={{ background: `url(${upload})`, width: 14, height: 14, display: 'inline-block' }}></span>选择文件\n          </div>\n          }\n        </button>\n        {newFileList.map(item => <div className='mg-upload-accessory-item' key={item.uid}>\n          <span className='mg-upload-accessory-item-icon'></span>{item.name}\n        </div>)}\n      </div>\n      {/* {\n        newFileList.map(item => <img key={item.uid} src={item.url || window.URL.createObjectURL(item.originFileObj)}></img>)\n      } */}\n    </div>\n  );\n}\n\nexport default forwardRef(MgUpload);\n"]},"metadata":{},"sourceType":"module"}