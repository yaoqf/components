{"ast":null,"code":"import _slicedToArray from \"/Users/yaoqingfeng/Downloads/work/\\u901A\\u7528\\u7EC4\\u4EF6/MgUpload/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/yaoqingfeng/Downloads/work/\\u901A\\u7528\\u7EC4\\u4EF6/MgUpload/src/MgUpload.js\";\nimport React, { useState, forwardRef, useRef } from \"react\";\nimport \"./styles.css\";\nimport { Upload, Button } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport { uuids } from './utils/utils';\n\nfunction MgUpload(props, ref) {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      fileList = _useState2[0],\n      setFileList = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      jsFileList = _useState4[0],\n      setJsFileList = _useState4[1];\n\n  var inputRef = useRef();\n  var uploadProps = {\n    onChange: function onChange(info) {\n      console.log(info.file);\n      console.log(info.fileList);\n      setFileList(info.fileList);\n    },\n    beforeUpload: function beforeUpload() {\n      return false;\n    },\n    multiple: true,\n    fileList: fileList\n  };\n\n  var handleChange = function handleChange(info) {\n    console.log(info);\n    console.log(info.currentTarget.files);\n    var fileList = [];\n    Object.entries(info.currentTarget.files).forEach(function (item) {\n      var _item = _slicedToArray(item, 2),\n          key = _item[0],\n          value = _item[1];\n\n      var file = {\n        uid: uuids(),\n        name: value.name,\n        size: value.size,\n        type: value.type,\n        lastModified: value.lastModified,\n        lastModifiedDate: value.lastModifiedDate,\n        originFileObj: item[1]\n      };\n      fileList.push(file);\n    });\n    console.log(fileList);\n    setJsFileList(fileList);\n    setFileList(fileList);\n  };\n\n  console.log(jsFileList);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Upload, Object.assign({}, uploadProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(UploadOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }), \" Click to Upload\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputRef,\n    style: {\n      display: \"none\"\n    },\n    type: \"file\",\n    files: jsFileList,\n    onChange: handleChange,\n    multiple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      inputRef.current.click();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"\\u4E0A\\u4F20\"), jsFileList.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: item.uid,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 33\n      }\n    }, item.name);\n  }), jsFileList.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"a\", {\n      href: item.url || item.thumbUrl,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 34\n      }\n    });\n  })));\n}\n\nexport default forwardRef(MgUpload);","map":{"version":3,"sources":["/Users/yaoqingfeng/Downloads/work/通用组件/MgUpload/src/MgUpload.js"],"names":["React","useState","forwardRef","useRef","Upload","Button","UploadOutlined","uuids","MgUpload","props","ref","fileList","setFileList","jsFileList","setJsFileList","inputRef","uploadProps","onChange","info","console","log","file","beforeUpload","multiple","handleChange","currentTarget","files","Object","entries","forEach","item","key","value","uid","name","size","type","lastModified","lastModifiedDate","originFileObj","push","display","current","click","map","url","thumbUrl"],"mappings":"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","sourcesContent":["import React, { useState, forwardRef, useRef } from \"react\";\nimport \"./styles.css\";\nimport { Upload, Button } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport { uuids } from './utils/utils'\n\n\nfunction MgUpload(props, ref) {\n  const [fileList, setFileList] = useState([]);\n  const [jsFileList, setJsFileList] = useState([]);\n  const inputRef = useRef();\n  const uploadProps = {\n    onChange: (info) => {\n      console.log(info.file);\n      console.log(info.fileList);\n      setFileList(info.fileList);\n    },\n    beforeUpload: () => false,\n    multiple: true,\n    fileList: fileList\n  };\n\n  const handleChange = (info) => {\n    console.log(info);\n    console.log(info.currentTarget.files);\n    const fileList = [];\n    Object.entries(info.currentTarget.files).forEach((item) => {\n      const [key, value] = item;\n      const file = {\n        uid: uuids(),\n        name: value.name,\n        size: value.size,\n        type: value.type,\n        lastModified: value.lastModified,\n        lastModifiedDate: value.lastModifiedDate,\n        originFileObj: item[1]\n      };\n      fileList.push(file);\n    });\n    console.log(fileList);\n\n    setJsFileList(fileList);\n    setFileList(fileList)\n  };\n  console.log(jsFileList)\n  return (\n    <div className=\"App\">\n      <Upload {...uploadProps}>\n        <Button>\n          <UploadOutlined /> Click to Upload\n        </Button>\n      </Upload>\n      <div>\n        <input\n          ref={inputRef}\n          style={{ display: \"none\" }}\n          type=\"file\"\n          files={jsFileList}\n          onChange={handleChange}\n          multiple={true}\n        />\n        <Button\n          onClick={() => {\n            inputRef.current.click();\n          }}\n        >\n          上传\n        </Button>\n        {jsFileList.map(item => <div key={item.uid}>\n          {item.name}\n        </div>)}\n        {\n          jsFileList.map(item => <a href={item.url || item.thumbUrl}></a>)\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default forwardRef(MgUpload);\n"]},"metadata":{},"sourceType":"module"}